import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

sectors = ['Healthcare','Basic Materials','Financials','Transportation & Logistics','Technology','Consumer Non-Cyclicals','Industrials','Energy','Consumer Cyclicals','Properties & Real Estate','Infrastructures']
industries = {'Healthcare': ['DVLA.JK', 'HEAL.JK', 'INAF.JK', 'KAEF.JK', 'KLBF.JK', 'MERK.JK', 'MIKA.JK', 'PEHA.JK', 'PRDA.JK', 'PRIM.JK', 'PYFA.JK', 'SAME.JK', 'SCPI.JK', 'SIDO.JK', 'SILO.JK', 'SRAJ.JK', 'TSPC.JK'], 'Basic Materials': ['ADMG.JK', 'AGII.JK', 'AKPI.JK', 'ALDO.JK', 'ALKA.JK', 'ALMI.JK', 'ANTM.JK', 'APLI.JK', 'BAJA.JK', 'BMSR.JK', 'BRMS.JK', 'BRNA.JK', 'BRPT.JK', 'BTON.JK', 'CITA.JK', 'CLPI.JK', 'CTBN.JK', 'DKFT.JK', 'DPNS.JK', 'EKAD.JK', 'ESSA.JK', 'ETWA.JK', 'FASW.JK', 'FPNI.JK', 'GDST.JK', 'HKMU.JK', 'IGAR.JK', 'INAI.JK', 'INCF.JK', 'INCI.JK', 'INCO.JK', 'INKP.JK', 'INRU.JK', 'INTD.JK', 'INTP.JK', 'IPOL.JK', 'ISSP.JK', 'JKSW.JK', 'KBRI.JK', 'KDSI.JK', 'KMTR.JK', 'KRAS.JK', 'LMSH.JK', 'LTLS.JK', 'MDKA.JK', 'MDKI.JK', 'MOLI.JK', 'NIKL.JK', 'OKAS.JK', 'PBID.JK', 'PICO.JK', 'PSAB.JK', 'SIMA.JK', 'SMBR.JK', 'SMCB.JK', 'SMGR.JK', 'SPMA.JK', 'SQMI.JK', 'SRSN.JK', 'SULI.JK', 'SWAT.JK', 'TALF.JK', 'TBMS.JK', 'TDPM.JK', 'TINS.JK', 'TIRT.JK', 'TKIM.JK', 'TPIA.JK', 'TRST.JK', 'UNIC.JK', 'WSBP.JK', 'WTON.JK', 'YPAS.JK', 'ZINC.JK'], 'Financials': ['ABDA.JK', 'ADMF.JK', 'AGRO.JK', 'AGRS.JK', 'AHAP.JK', 'AMAG.JK', 'APIC.JK', 'ARTO.JK', 'ASBI.JK', 'ASDM.JK', 'ASJT.JK', 'ASMI.JK', 'ASRM.JK', 'BABP.JK', 'BACA.JK', 'BBCA.JK', 'BBHI.JK', 'BBKP.JK', 'BBLD.JK', 'BBMD.JK', 'BBNI.JK', 'BBRI.JK', 'BBTN.JK', 'BBYB.JK', 'BCAP.JK', 'BCIC.JK', 'BDMN.JK', 'BEKS.JK', 'BFIN.JK', 'BGTG.JK', 'BINA.JK', 'BJBR.JK', 'BJTM.JK', 'BKSW.JK', 'BMAS.JK', 'BMRI.JK', 'BNBA.JK', 'BNGA.JK', 'BNII.JK', 'BNLI.JK', 'BPFI.JK', 'BPII.JK', 'BRIS.JK', 'BSIM.JK', 'BSWD.JK', 'BTPN.JK', 'BTPS.JK', 'BVIC.JK', 'CASA.JK', 'CFIN.JK', 'DEFI.JK', 'DNAR.JK', 'DNET.JK', 'GSMF.JK', 'HDFA.JK', 'INPC.JK', 'JMAS.JK', 'LPGI.JK', 'LPPS.JK', 'MAYA.JK', 'MCOR.JK', 'MEGA.JK', 'MFIN.JK', 'MGNA.JK', 'MREI.JK', 'MTWI.JK', 'NICK.JK', 'NISP.JK', 'NOBU.JK', 'OCAP.JK', 'PADI.JK', 'PALM.JK', 'PANS.JK', 'PEGE.JK', 'PLAS.JK', 'PNBN.JK', 'PNBS.JK', 'PNIN.JK', 'PNLF.JK', 'POLA.JK', 'POOL.JK', 'RELI.JK', 'SDRA.JK', 'SMMA.JK', 'SRTG.JK', 'STAR.JK', 'TIFA.JK', 'TRIM.JK', 'TRUS.JK', 'TUGU.JK', 'VICO.JK', 'VINS.JK', 'VRNA.JK', 'WOMF.JK', 'YULE.JK'], 'Transportation & Logistics': ['ABDA.JK', 'ADMF.JK', 'AGRO.JK', 'AGRS.JK', 'AHAP.JK', 'AMAG.JK', 'APIC.JK', 'ARTO.JK', 'ASBI.JK', 'ASDM.JK', 'ASJT.JK', 'ASMI.JK', 'ASRM.JK', 'BABP.JK', 'BACA.JK', 'BBCA.JK', 'BBHI.JK', 'BBKP.JK', 'BBLD.JK', 'BBMD.JK', 'BBNI.JK', 'BBRI.JK', 'BBTN.JK', 'BBYB.JK', 'BCAP.JK', 'BCIC.JK', 'BDMN.JK', 'BEKS.JK', 'BFIN.JK', 'BGTG.JK', 'BINA.JK', 'BJBR.JK', 'BJTM.JK', 'BKSW.JK', 'BMAS.JK', 'BMRI.JK', 'BNBA.JK', 'BNGA.JK', 'BNII.JK', 'BNLI.JK', 'BPFI.JK', 'BPII.JK', 'BRIS.JK', 'BSIM.JK', 'BSWD.JK', 'BTPN.JK', 'BTPS.JK', 'BVIC.JK', 'CASA.JK', 'CFIN.JK', 'DEFI.JK', 'DNAR.JK', 'DNET.JK', 'GSMF.JK', 'HDFA.JK', 'INPC.JK', 'JMAS.JK', 'LPGI.JK', 'LPPS.JK', 'MAYA.JK', 'MCOR.JK', 'MEGA.JK', 'MFIN.JK', 'MGNA.JK', 'MREI.JK', 'MTWI.JK', 'NICK.JK', 'NISP.JK', 'NOBU.JK', 'OCAP.JK', 'PADI.JK', 'PALM.JK', 'PANS.JK', 'PEGE.JK', 'PLAS.JK', 'PNBN.JK', 'PNBS.JK', 'PNIN.JK', 'PNLF.JK', 'POLA.JK', 'POOL.JK', 'RELI.JK', 'SDRA.JK', 'SMMA.JK', 'SRTG.JK', 'STAR.JK', 'TIFA.JK', 'TRIM.JK', 'TRUS.JK', 'TUGU.JK', 'VICO.JK', 'VINS.JK', 'VRNA.JK', 'WOMF.JK', 'YULE.JK'], 'Technology': ['ATIC.JK', 'DIVA.JK', 'EMTK.JK', 'KIOS.JK', 'KREN.JK', 'LMAS.JK', 'LUCK.JK', 'MCAS.JK', 'MLPT.JK', 'MTDL.JK', 'NFCX.JK', 'PTSN.JK', 'SKYB.JK'], 'Consumer Non-Cyclicals': ['AALI.JK', 'ADES.JK', 'AISA.JK', 'ALTO.JK', 'AMRT.JK', 'ANDI.JK', 'ANJT.JK', 'BISI.JK', 'BTEK.JK', 'BUDI.JK', 'BWPT.JK', 'CAMP.JK', 'CEKA.JK', 'CLEO.JK', 'CPIN.JK', 'CPRO.JK', 'DAYA.JK', 'DLTA.JK', 'DPUM.JK', 'DSFI.JK', 'DSNG.JK', 'EPMT.JK', 'FISH.JK', 'GGRM.JK', 'GOLL.JK', 'GOOD.JK', 'GZCO.JK', 'HERO.JK', 'HMSP.JK', 'HOKI.JK', 'ICBP.JK', 'INDF.JK', 'JAWA.JK', 'JPFA.JK', 'KINO.JK', 'KPAS.JK', 'LSIP.JK', 'MAGP.JK', 'MAIN.JK', 'MBTO.JK', 'MGRO.JK', 'MIDI.JK', 'MLBI.JK', 'MLPL.JK', 'MPPA.JK', 'MRAT.JK', 'MYOR.JK', 'PANI.JK', 'PCAR.JK', 'PSDN.JK', 'RANC.JK', 'ROTI.JK', 'SDPC.JK', 'SGRO.JK', 'SIMP.JK', 'SIPD.JK', 'SKBM.JK', 'SKLT.JK', 'SMAR.JK', 'SSMS.JK', 'STTP.JK', 'TBLA.JK', 'TCID.JK', 'TGKA.JK', 'ULTJ.JK', 'UNSP.JK', 'UNVR.JK', 'WAPO.JK', 'WICO.JK', 'WIIM.JK'], 'Industrials': ['AMFG.JK', 'AMIN.JK', 'APII.JK', 'ARNA.JK', 'ASGR.JK', 'ASII.JK', 'BHIT.JK', 'BNBR.JK', 'CAKK.JK', 'CTTH.JK', 'DYAN.JK', 'HEXA.JK', 'IBFN.JK', 'ICON.JK', 'IKAI.JK', 'IKBI.JK', 'IMPC.JK', 'INDX.JK', 'INTA.JK', 'JECC.JK', 'JTPE.JK', 'KBLI.JK', 'KBLM.JK', 'KIAS.JK', 'KOBX.JK', 'KOIN.JK', 'KONI.JK', 'KPAL.JK', 'KRAH.JK', 'LION.JK', 'MARK.JK', 'MDRN.JK', 'MFMI.JK', 'MLIA.JK', 'SCCO.JK', 'SKRN.JK', 'SOSS.JK', 'SPTO.JK', 'TIRA.JK', 'TOTO.JK', 'TRIL.JK', 'UNTR.JK', 'VOKS.JK', 'ZBRA.JK'], 'Energy': ['ABMM.JK', 'ADRO.JK', 'AIMS.JK', 'AKRA.JK', 'APEX.JK', 'ARII.JK', 'ARTI.JK', 'BBRM.JK', 'BIPI.JK', 'BOSS.JK', 'BSSR.JK', 'BULL.JK', 'BUMI.JK', 'BYAN.JK', 'CANI.JK', 'CNKO.JK', 'DEWA.JK', 'DOID.JK', 'DSSA.JK', 'DWGL.JK', 'ELSA.JK', 'ENRG.JK', 'FIRE.JK', 'GEMS.JK', 'GTBO.JK', 'HITS.JK', 'HRUM.JK', 'IATA.JK', 'INDY.JK', 'INPS.JK', 'ITMA.JK', 'ITMG.JK', 'JSKY.JK', 'KKGI.JK', 'KOPI.JK', 'LEAD.JK', 'MBAP.JK', 'MBSS.JK', 'MEDC.JK', 'MTFN.JK', 'MYOH.JK', 'PGAS.JK', 'PKPK.JK', 'PSSI.JK', 'PTBA.JK', 'PTIS.JK', 'PTRO.JK', 'RAJA.JK', 'RIGS.JK', 'RUIS.JK', 'SHIP.JK', 'SMMT.JK', 'SMRU.JK', 'SOCI.JK', 'SUGI.JK', 'SURE.JK', 'TAMU.JK', 'TCPI.JK', 'TOBA.JK', 'TPMA.JK', 'TRAM.JK', 'WINS.JK'], 'Consumer Cyclicals': ['ABBA.JK', 'ACES.JK', 'AKKU.JK', 'ARGO.JK', 'ARTA.JK', 'AUTO.JK', 'BATA.JK', 'BAYU.JK', 'BELL.JK', 'BIMA.JK', 'BLTZ.JK', 'BMTR.JK', 'BOGA.JK', 'BOLT.JK', 'BRAM.JK', 'BUVA.JK', 'CARS.JK', 'CINT.JK', 'CNTX.JK', 'CSAP.JK', 'DFAM.JK', 'DIGI.JK', 'DUCK.JK', 'ECII.JK', 'ERAA.JK', 'ERTX.JK', 'ESTI.JK', 'FAST.JK', 'FILM.JK', 'FORU.JK', 'GDYR.JK', 'GEMA.JK', 'GJTL.JK', 'GLOB.JK', 'GWSA.JK', 'HDTX.JK', 'HOME.JK', 'HOTL.JK', 'HRTA.JK', 'IIKP.JK', 'IMAS.JK', 'INDR.JK', 'INDS.JK', 'JGLE.JK', 'JIHD.JK', 'JSPT.JK', 'KICI.JK', 'KPIG.JK', 'LMPI.JK', 'LPIN.JK', 'LPPF.JK', 'MABA.JK', 'MAMI.JK', 'MAPA.JK', 'MAPB.JK', 'MAPI.JK', 'MARI.JK', 'MASA.JK', 'MDIA.JK', 'MICE.JK', 'MINA.JK', 'MKNT.JK', 'MNCN.JK', 'MPMX.JK', 'MSIN.JK', 'MSKY.JK', 'MYTX.JK', 'NIPS.JK', 'NUSA.JK', 'PANR.JK', 'PBRX.JK', 'PDES.JK', 'PGLI.JK', 'PJAA.JK', 'PNSE.JK', 'POLY.JK', 'PRAS.JK', 'PSKT.JK', 'PTSP.JK', 'PZZA.JK', 'RALS.JK', 'RICY.JK', 'SCMA.JK', 'SHID.JK', 'SMSM.JK', 'SONA.JK', 'SOTS.JK', 'SRIL.JK', 'SSTM.JK', 'TELE.JK', 'TFCO.JK', 'TMPO.JK', 'TRIO.JK', 'TRIS.JK', 'UNIT.JK', 'VIVA.JK', 'WOOD.JK', 'YELO.JK', 'ZONE.JK'], 'Properties & Real Estate': ['APLN.JK', 'ARMY.JK', 'ASRI.JK', 'BAPA.JK', 'BCIP.JK', 'BEST.JK', 'BIKA.JK', 'BIPP.JK', 'BKDP.JK', 'BKSL.JK', 'BSDE.JK', 'CITY.JK', 'COWL.JK', 'CSIS.JK', 'CTRA.JK', 'DART.JK', 'DILD.JK', 'DMAS.JK', 'DUTI.JK', 'ELTY.JK', 'EMDE.JK', 'FMII.JK', 'FORZ.JK', 'GAMA.JK', 'GMTD.JK', 'GPRA.JK', 'INPP.JK', 'JRPT.JK', 'KIJA.JK', 'LAND.JK', 'LCGP.JK', 'LPCK.JK', 'LPKR.JK', 'LPLI.JK', 'MDLN.JK', 'MKPI.JK', 'MMLP.JK', 'MPRO.JK', 'MTLA.JK', 'MTSM.JK', 'MYRX.JK', 'NASA.JK', 'NIRO.JK', 'OMRE.JK', 'PLIN.JK', 'POLL.JK', 'PPRO.JK', 'PUDP.JK', 'PWON.JK', 'RBMS.JK', 'RDTX.JK', 'RIMO.JK', 'RISE.JK', 'RODA.JK', 'SATU.JK', 'SMDM.JK', 'SMRA.JK', 'TARA.JK', 'URBN.JK'], 'Infrastructures': ['ACST.JK', 'ADHI.JK', 'BALI.JK', 'BTEL.JK', 'BUKK.JK', 'CASS.JK', 'CENT.JK', 'CMNP.JK', 'DGIK.JK', 'EXCL.JK', 'FREN.JK', 'GHON.JK', 'GMFI.JK', 'GOLD.JK', 'HADE.JK', 'IBST.JK', 'IDPR.JK', 'IPCC.JK', 'IPCM.JK', 'ISAT.JK', 'JKON.JK', 'JSMR.JK', 'KARW.JK', 'KBLV.JK', 'LAPD.JK', 'LCKM.JK', 'LINK.JK', 'META.JK', 'MPOW.JK', 'MTRA.JK', 'NRCA.JK', 'OASA.JK', 'PBSA.JK', 'PORT.JK', 'POWR.JK', 'PPRE.JK', 'PTPP.JK', 'SSIA.JK', 'SUPR.JK', 'TBIG.JK', 'TGRA.JK', 'TLKM.JK', 'TOPS.JK', 'TOTL.JK', 'TOWR.JK', 'WEGE.JK', 'WIKA.JK', 'WSKT.JK']}
shares = {'Healthcare': ['1924688333', '3935892857', '620806680', '2753165000', '17150000000', '3469138591', '12675160000', '22222222200', '589896800', '8407608979', '1000000000', '3889179559', '40882331500', '31985962000', '1006003070', '1000000000', '3066660000', '24493093216', '37365877065', '4900000000', '220000000', '9311800000', '6449463636', '612248000', '20073474600', '720000000', '1350356872', '15825800000', '507665055', '3816000000', '2191870558', '5001552516', '3873500000', '18197283760', '434000000', '1080000000', '72518217656', '1200051427', '2222222400', '41524501700', '9350000000', '3354175000', '24030764725', '2933628566', '11766313488', '1075760000', '1362671400', '22699326779', '24835000000', '2539601000', '3174339029', '3431000000', '2000000000', '2928495000', '9006250000', '7341430976', '446674175', '7840000000', '13717687500', '348386472', '384000000', '1348780500', '5000000000', '40483553140', '1400000000', '12746354780', '6250000000', '8958380460', '681823317', '19649411888', '304283840', '3691137517', '1250000000', '2315361355', '6199500000', '4819733000', '61953555600', '3435000000', '5840126500', '4000000000', '853423236', '44014333126', '2668586400', '19753494636', '1125000000', '1800000000', '3934592500', '14621864340', '661784520', '5591980103', '1300000000', '4800135289', '353220780', '122042299500', '21512953877', '185819884852', '1645796054', '4049189100', '36924339786', '150043411587', '8479490328', '3637976068', '4800016020', '13894099969', '11918427523', '42618850927', '17926071041', '1429915525', '4725101522', '9675817341', '45000000000', '7031371419', '4000000000', '51351733883', '123210496616', '7250000000', '3440455528', '9647311150', '15967115620', '23731287132', '5000000000', '86068156705', '592280000', '1293916404', '608175716', '6073369498', '2175020012', '63710196917', '5028669376', '2502100000', '3000000000', '10416229249', '14865343101', '7513992252', '167708902705', '34953681505', '25940187103', '873937142', '418000000', '17921635680', '1030080995', '8603416176', '92399999996', '1159200024', '16583997586', '3354120000', '160057457509', '24890783784', '75357433911', '35819545925', '1155750000', '3803526210', '6000000000', '2343750000', '1400000000', '2673995362', '515498662', '3534000000', '450056980', '133786220000', '45667877639', '141784040338', '979110000', '93747218044', '25091882375', '21171365812', '19517921842', '1850225000', '2616500000', '3651978177', '46277496376', '36822665755', '720000000', '10536203690', '7626663000', '1000000000', '4498997362', '103108797367', '2640452000', '14117801449', '371320705024', '20590473213', '15690044331', '31525291000', '33333335000', '1203300219', '5885000000', '833440000', '33250000000', '15000000000', '54476269803', '1431125517', '2086950000', '1875000000', '1356250000', '4538041373', '3125000000', '1199999998', '595000000', '31183464900', '3984520457', '1771429000', '1700014594', '806000000', '1000000000', '3960361250', '5405188966', '2570000000', '12000000000', '306338500', '5436872008', '17125504000', '10685124441', '7934683000', '8956361206', '83345000000', '70000000', '6250000000', '889863981', '4871214021', '16398000000', '2433379958', '59572382787', '1950000000', '2892000000', '5683175151', '1307000000', '816061500', '2050000000', '800371500', '18535695255', '1230839821', '11241890000', '6449574702', '7431530800', '3141390962', '2420547025', '2383745900', '1146170959', '687266666', '6790000000', '21853733792', '2000000000', '1899852850', '5541165000', '1250000000', '1625000000', '10365854185', '1428571400', '5638246600', '800659050', '48198111100', '7692307700', '9468359000', '16867292274', '14184000000', '8621173232', '7737556379', '331129952', '4175000000', '4705882300', '1857135500', '10599842400', '770552320', '1283330000', '1850000000', '1120000000', '9252820991', '4272964279', '4126405336', '1334333000', '2020250000', '3493875000', '2031643057', '7412000000', '7298500000', '43521913019', '3350000000', '61316751483', '2166666800', '24821230250', '1800000000', '2162547122', '3303400000', '2708640000', '15950000000', '5187500000', '1286539792', '1109953847', '17226975700', '2425354179', '2015208720', '4668671400', '2548826428', '13128430665', '3629411800', '3990277158', '2477888787', '9511217000', '400000975', '1475363179', '480000000', '726130199', '781250000', '6400000000', '3948137748', '650000000', '465224000', '1984009887', '5566414000', '335388383259', '1300000000', '6390018713', '1875000000', '10011027656', '9242500000', '410000000', '1600000000', '5882353000', '1924088000', '12111376157', '550000000', '91480783837', '3484800000', '1111112000', '1500000000', '28233511500', '1015380000', '1277276000', '3665000759', '36897901455', '1201409662836', '4276655336', '666741103', '7375720674', '1000000000', '1545001224', '14230399705', '2500000000', '1894375000', '15819142767', '1070362500', '7800760000', '6000000000', '2120000000', '2626250000', '2290521166', '5650009930', '7000000000', '1040740800', '6542445783', '1524680000', '3601462800', '15262296435', '832862387', '4183634000', '840000000', '2948300000', '7101084801', '3221750000', '116318076900', '9677752680', '22212194782', '1575000000', '2130360201', '3550001452', '5958750000', '4605262400', '13518100000', '18046479742', '2525000000', '25238245388', '1517332349', '8045486799', '1350904927', '11661908000', '1089750000', '1062437500', '2003000000', '9412000000', '2125000000', '972204500', '33600000000', '13305799387', '833333000', '1224000000', '1684662500', '3994291039', '8654325000', '54268500000', '3099267500', '633600000', '1438370465', '207656617', '9936338720', '8780426500', '4382841253', '654351707', '656249710', '437913588', '5210192000', '7500034794', '5470982941', '1808221900', '20021178779', '11181971732', '650000000', '1388883283', '3343935022', '591828000', '3681231699', '5280000000', '949868500', '1818384820', '5284811100', '6443379509', '4600000000', '42197950841', '1600000000', '5000346993', '4020067041', '8062702740', '7185992035', '940720000', '999053167', '1129925000', '9230665050', '1082575681', '3262513004', '16232951842', '798499394', '151200000', '22581909405', '2329040482', '16308519860', '150000000', '1000000000', '11726575201', '13750000000', '2032540000', '7257871200', '2318736000', '6852050000', '5566529785', '587152700', '665000000', '7150002603', '4007235107', '1120000000', '1742167907', '8687995734', '405000000', '1250018264', '3666312500', '1500000000', '2841262838', '14929100000', '276000000', '20824888369', '2600006056', '1428571500', '1075862550', '500000000', '1500000000', '5000000000', '2165000000', '46875122110', '1307530330', '800000000', '8215366379', '2272500000', '4415590000', '980843732', '2861333000', '312000000', '697266668', '10546185701', '1069009400', '768043253', '97557129263', '971190000', '19346396900', '18208470100', '1663943474', '1292808150', '1011347536', '2149942974', '2792620000', '3966350139', '5630000914', '1000000000', '4049616328', '1307734937', '2100000000', '2863195484', '520160000', '4593005014', '787851525', '650005151', '1008517669', '96000000', '1100000000', '2679600000', '300000000', '425000000', '70898018369', '1170432803', '2260292880', '2588250000', '350000022', '6822863965', '1560000000', '715749640', '1396300283', '15365229912', '9000000004', '16666000000', '2238750000', '12299317590', '3812500000', '28504000000', '2387922900', '16600000000', '5252644000', '3800000310', '9182946945', '1387737233', '9610044133', '25906179152', '1227271952', '107995419900', '1750026639', '1070000000', '867933300', '3555560000', '37540533209', '39215538400', '24472983771', '2530150002', '12533067322', '7632167798', '25136231252', '1562500000', '11623514905', '1917500000', '1434050703', '448000000', '17710708194', '2650000000', '757581000', '1904883411', '3410475412', '3554445700', '3750000000', '600000000', '33435294800', '14246349500', '6562500000', '3961452039', '3540735503', '3250000000', '5500000000', '948194000', '12000123702', '2107000000', '6615000000', '15682323987', '1875000000', '2400092180', '6889134608', '15049787710', '2724036581', '23646668691', '1562500000', '4462963276', '816997053', '12966640084', '9942500000', '2000006424', '428000000', '517791681', '1460002367', '12135235641', '5882352900', '1994370480', '3138823600', '12276884585', '83552719544', '31842082852', '7655126330', '2068526950', '2084850829', '770000000', '232848000', '2924486639', '3142864924', '2206312500', '22358699725', '86703220792', '7747281949', '4285215616', '11004929322', '807400000', '8001111504', '2550011472', '63098600000', '2350000000', '23453177240', '666667500', '6082020000', '651150000', '10635644907', '2523350000', '2157000000', '1635333332', '22198871804', '22715776032', '7403659460', '3240235840', '2496258344', '23788880029', '2700064877', '7700000148', '2197540705', '6347220000', '805992931', '273200000', '454056563', '2373449165', '1900073314', '27058850000', '2945211000', '1000000000', '1537550563', '3150000000', '11307246524', '15773797158', '3125000000', '15627150000', '1387500000', '720000000', '1875000000', '21482028246', '3000000000', '1166666700', '715000000', '3061341438', '2833417056', '840000000', '1765625000', '24241508196', '41488978343', '772459095', '488000000', '5737848882', '568375000', '3425012804', '1599999996', '1200000000', '896709596', '1184200000', '3550000000', '13755600000', '2588300000', '23837645998', '38425504906', '781250000', '4068323920', '32022073293', '797813496', '3351075600', '2010526400', '8318823600', '750000000', '2495753334', '2341366264', '2813941985', '8388870206', '16087156000', '771178020', '10224271000', '1075003273', '61675671883', '701043478', '13959422300', '937500000', '3393434905', '26460000000', '1440000000', '18850000000', '10351231636', '5417063153', '11520659250', '1500000000', '550165300', '3169200000', '6199897354', '2167500000', '878187500', '1008605000', '5314344000', '220808000', '329560000', '6301930902', '1375181505', '1000000000', '48159602400', '535080000', '3021875000', '6194200000', '3128140475', '4227082500', '7096000000', '1564487500', '2656212826', '750000000', '268800000', '6633610151', '5727802639', '1800000000', '1459200000', '641717510', '609130000', '45080600000', '10945000000', '4375000000', '1250000000', '1435185100', '13592128209', '1250000000', '6186488888', '2650000000', '929675000', '770000000', '983557875', '615145012', '8033263239', '17147132545', '5125000000', '833333300', '1375000000', '4752982378', '929926282', '822333600', '73970569505', '2500000000', '3600000', '1135225000', '1274000000', '8482552020', '1347258842', '1359934021', '4364335706', '1818622000', '1119326168', '2719790000', '910048868', '30000000000', '13006125000', '442589871', '15816310000', '481000000', '1839102056', '1730103217', '6907405000', '7500000000', '585000000', '2463335405', '2872193366', '9932534336', '9019381973', '4772138237', '16375600000', '8750000000', '6751540089', '8750029318', '3418085290', '1253000000', '2328125000', '6367664717', '3150000000', '16508568358', '12499385782', '5758675440', '450000000', '7059000000', '1653574499', '12691682390', '662400000', '799414231', '1000003979', '1082524446', '3154092216', '2700000000', '15537591429', '12000705445', '20452176844', '6020000000', '13564835000', '4705249440', '9525000000', '1170909181', '10903372600', '4800000602', '10721709000', '1310000000', '24811541414', '5730581103', '2500000000', '1137579698', '1497576771', '6334375000', '3019200000', '5385019201', '1353435000', '1200000696', '37500000000', '19852540000', '10069645750', '10223647156', '1098920000', '22656999445', '6025373372', '734680000', '402133334', '5000000000', '10485050500', '1285000000', '1256300000', '7310929389', '1666666500', '4823076400', '918492750', '2750000000', '3571443999', '3552213000', '7447753454', '588000000', '1011774750', '3113223570', '12946530200', '99062216600', '57051500000', '1058333250', '421640000', '8106700622', '2050015767', '33330000000', '4375000000', '3410000000', '10320000000', '51014625000', '1435000712', '86511545092', '2633300000', '49643627934', '7945412700', '1200000000', '7109300000', '4551457323', '26007494645', '3141443831', '1510200000', '2951289164', '2808000000', '7571035172', '435000000', '800000000', '4509864300', '3555575600', '3478036250', '1210000000', '4156572300', '1750000000', '2287500000', '11553528000', '383331363', '3138983000', '75422200', '2500162344', '6666666700', '3730135136', '38150000000', '3232122640', '2000144838', '3055709212', '6708000000', '15217075658', '1460573616', '3075000000', '16464270400', '43750000000', '4155602595', '5687353997', '6265193445', '1240923111', '9572000000', '1460554819', '1042500000', '2393710348', '1600013197', '2359355118', '2099873760', '8969951372', '2710000000', '5235283980', '4364337057', '11938622394', '29419000000', '12941176500', '3481481480', '6437500000', '2475720000', '54555721325', '28806807016', '8715466600', '1912774405', '668000089', '1785000000', '8496000000', '2510706263', '25250000000', '870171478', '1333334556'], 'Basic Materials': ['3889179559', '3066660000', '612248000', '1350356872', '507665055', '3816000000', '72518217656', '24030764725', '1362671400', '24835000000', '61953555600', '853423236', '1800000000', '45000000000', '1159200024', '141784040338', '979110000', '93747218044', '720000000', '1700014594', '3960361250', '306338500', '17125504000', '800371500', '5638246600', '331129952', '3493875000', '3303400000', '1109953847', '17226975700', '4668671400', '2477888787', '5566414000', '1875000000', '9242500000', '12111376157', '3221750000', '9412000000', '2125000000', '972204500', '633600000', '1438370465', '207656617', '9936338720', '5470982941', '1388883283', '591828000', '3681231699', '6443379509', '7185992035', '150000000', '665000000', '8687995734', '405000000', '1500000000', '8215366379', '19346396900', '96000000', '1560000000', '107995419900', '24472983771', '2530150002', '2724036581', '63098600000', '6082020000', '10635644907', '2523350000', '3240235840', '805992931', '2373449165', '1000000000', '1537550563', '1875000000', '3061341438', '568375000', '781250000', '1075003273', '26460000000', '1375181505', '5125000000', '929926282', '442589871', '9932534336', '9019381973', '8750000000', '6751540089', '3418085290', '2328125000', '3154092216', '15537591429', '6020000000', '5730581103', '3019200000', '1353435000', '734680000', '10485050500', '7447753454', '1011774750', '3113223570', '86511545092', '2808000000', '383331363', '54555721325', '8715466600', '668000089', '25250000000'], 'Financials': ['620806680', '1000000000', '24493093216', '37365877065', '4900000000', '5001552516', '18197283760', '2222222400', '11766313488', '13717687500', '348386472', '384000000', '1400000000', '8958380460', '304283840', '44014333126', '19753494636', '14621864340', '122042299500', '21512953877', '185819884852', '1645796054', '4049189100', '36924339786', '150043411587', '3637976068', '13894099969', '11918427523', '42618850927', '17926071041', '9675817341', '51351733883', '15967115620', '23731287132', '5000000000', '6073369498', '10416229249', '14865343101', '34953681505', '17921635680', '92399999996', '3354120000', '24890783784', '75357433911', '35819545925', '2673995362', '515498662', '45667877639', '19517921842', '3651978177', '10536203690', '7626663000', '15690044331', '54476269803', '3984520457', '687266666', '16867292274', '14184000000', '1300000000', '14230399705', '6542445783', '20021178779', '1000000000', '2100000000', '300000000', '2588250000', '1387737233', '25906179152', '37540533209', '11623514905', '2650000000', '3410475412', '517791681', '2924486639', '651150000', '22715776032', '7403659460', '273200000', '11307246524', '15773797158', '720000000', '2833417056', '1184200000', '23837645998', '38425504906', '4068323920', '32022073293', '3351075600', '2341366264', '1800000000', '8482552020', '1359934021', '6367664717', '13564835000', '4800000602', '3552213000', '7109300000', '800000000', '3555575600', '15217075658', '1460573616', '5687353997', '6265193445', '3481481480', '1785000000'], 'Transportation & Logistics': ['620806680', '1000000000', '24493093216', '37365877065', '4900000000', '5001552516', '18197283760', '2222222400', '11766313488', '13717687500', '348386472', '384000000', '1400000000', '8958380460', '304283840', '44014333126', '19753494636', '14621864340', '122042299500', '21512953877', '185819884852', '1645796054', '4049189100', '36924339786', '150043411587', '3637976068', '13894099969', '11918427523', '42618850927', '17926071041', '9675817341', '51351733883', '15967115620', '23731287132', '5000000000', '6073369498', '10416229249', '14865343101', '34953681505', '17921635680', '92399999996', '3354120000', '24890783784', '75357433911', '35819545925', '2673995362', '515498662', '45667877639', '19517921842', '3651978177', '10536203690', '7626663000', '15690044331', '54476269803', '3984520457', '687266666', '16867292274', '14184000000', '1300000000', '14230399705', '6542445783', '20021178779', '1000000000', '2100000000', '300000000', '2588250000', '1387737233', '25906179152', '37540533209', '11623514905', '2650000000', '3410475412', '517791681', '2924486639', '651150000', '22715776032', '7403659460', '273200000', '11307246524', '15773797158', '720000000', '2833417056', '1184200000', '23837645998', '38425504906', '4068323920', '32022073293', '3351075600', '2341366264', '1800000000', '8482552020', '1359934021', '6367664717', '13564835000', '4800000602', '3552213000', '7109300000', '800000000', '3555575600', '15217075658', '1460573616', '5687353997', '6265193445', '3481481480', '1785000000'], 'Technology': ['2539601000', '2315361355', '3435000000', '5840126500', '123210496616', '103108797367', '1431125517', '806000000', '6449574702', '2383745900', '1428571400', '7692307700', '2020250000', '2031643057', '61316751483', '1800000000', '1500000000', '1201409662836', '1524680000', '5280000000', '5000346993', '3262513004', '1075862550', '18208470100', '787851525', '715749640', '867933300', '1434050703', '1875000000', '1562500000', '3138823600', '12276884585', '666667500', '2157000000', '772459095', '5314344000', '983557875', '585000000', '1256300000', '1666666500', '4375000000', '2951289164', '2000144838', '1042500000', '2359355118', '11938622394', '1333334556'], 'Consumer Non-Cyclicals': ['1924688333', '589896800', '1000000000', '9311800000', '2191870558', '1200051427', '41524501700', '9350000000', '3354175000', '5000000000', '4000000000', '7031371419', '4000000000', '3000000000', '1155750000', '46277496376', '1000000000', '4498997362', '31525291000', '5885000000', '3125000000', '595000000', '12000000000', '7934683000', '889863981', '16398000000', '59572382787', '1950000000', '2050000000', '2420547025', '2000000000', '800659050', '9468359000', '4175000000', '1857135500', '10599842400', '2162547122', '2708640000', '2548826428', '3629411800', '480000000', '781250000', '650000000', '1924088000', '3665000759', '36897901455', '1545001224', '1070362500', '6000000000', '4183634000', '116318076900', '9677752680', '8045486799', '11661908000', '833333000', '8780426500', '4600000000', '940720000', '9230665050', '16232951842', '11726575201', '1500000000', '1428571500', '800000000', '768043253', '6822863965', '9000000004', '2238750000', '9610044133', '1070000000', '3554445700', '33435294800', '12000123702', '2107000000', '15682323987', '12966640084', '428000000', '5882352900', '22358699725', '4285215616', '807400000', '2550011472', '23788880029', '454056563', '15627150000', '1166666700', '5737848882', '2588300000', '1440000000', '18850000000', '2167500000', '1564487500', '6186488888', '1274000000', '1818622000', '15816310000', '1839102056', '1730103217', '6907405000', '2872193366', '1082524446', '9525000000', '10903372600', '10721709000', '1310000000', '19852540000', '1098920000', '6025373372', '402133334', '918492750', '3571443999', '12946530200', '7945412700', '4156572300', '1750000000', '11553528000', '2500162344', '38150000000', '6708000000', '1240923111', '2393710348', '2099873760', '2710000000', '29419000000', '12941176500'], 'Industrials': ['434000000', '1080000000', '1075760000', '2000000000', '7341430976', '1348780500', '40483553140', '86068156705', '2175020012', '418000000', '160057457509', '1203300219', '1199999998', '2892000000', '1230839821', '4272964279', '3948137748', '666741103', '840000000', '2130360201', '2525000000', '1517332349', '1089750000', '13305799387', '1224000000', '54268500000', '437913588', '3343935022', '151200000', '6852050000', '4007235107', '1120000000', '14929100000', '2600006056', '2272500000', '980843732', '312000000', '1069009400', '971190000', '1292808150', '1011347536', '520160000', '3800000310', '7632167798', '757581000', '3750000000', '6615000000', '3142864924', '2700064877', '3150000000', '3425012804', '3169200000', '822333600', '481000000', '7500000000', '8750029318', '799414231', '2700000000', '588000000', '10320000000', '1200000000', '3730135136', '3075000000', '4155602595', '1600013197', '2510706263'], 'Energy': ['2753165000', '40882331500', '31985962000', '220000000', '20073474600', '15825800000', '2933628566', '3431000000', '7840000000', '6199500000', '8479490328', '3440455528', '63710196917', '1400000000', '1850225000', '2616500000', '14117801449', '371320705024', '33333335000', '833440000', '4538041373', '1771429000', '8956361206', '6250000000', '11241890000', '21853733792', '8621173232', '770552320', '9252820991', '7298500000', '24821230250', '1475363179', '5882353000', '2500000000', '15819142767', '2948300000', '7101084801', '13518100000', '18046479742', '25238245388', '5210192000', '650000000', '999053167', '1129925000', '2032540000', '5000000000', '697266668', '4049616328', '16666000000', '1227271952', '1750026639', '3555560000', '25136231252', '3250000000', '31842082852', '2206312500', '24241508196', '1200000000', '5417063153', '11520659250', '550165300', '1008605000', '4227082500', '1459200000', '609130000', '4375000000', '1250000000', '770000000', '1347258842', '4364335706', '2719790000', '910048868', '3150000000', '12499385782', '7059000000', '24811541414', '2500000000', '1497576771', '37500000000', '5000000000', '1285000000', '8106700622', '2633300000', '49643627934', '3138983000', '4364337057', '2475720000'], 'Consumer Cyclicals': ['3935892857', '17150000000', '3469138591', '1006003070', '6449463636', '3174339029', '446674175', '12746354780', '4819733000', '2668586400', '1125000000', '1300000000', '4800135289', '353220780', '7250000000', '1293916404', '608175716', '873937142', '1030080995', '16583997586', '3803526210', '6000000000', '2343750000', '450056980', '20590473213', '15000000000', '1875000000', '1000000000', '2570000000', '83345000000', '70000000', '5683175151', '816061500', '6790000000', '1899852850', '1625000000', '7737556379', '4705882300', '1283330000', '4126405336', '1334333000', '2166666800', '15950000000', '5187500000', '1286539792', '2425354179', '2015208720', '3990277158', '9511217000', '726130199', '465224000', '6390018713', '410000000', '1600000000', '3484800000', '1111112000', '1000000000', '7800760000', '2290521166', '3601462800', '22212194782', '3550001452', '5958750000', '4605262400', '1062437500', '33600000000', '3994291039', '654351707', '656249710', '1808221900', '42197950841', '4020067041', '22581909405', '2329040482', '2318736000', '1250018264', '276000000', '1307530330', '10546185701', '97557129263', '1307734937', '4593005014', '650005151', '1008517669', '425000000', '2260292880', '1396300283', '15365229912', '12299317590', '28504000000', '2387922900', '16600000000', '5252644000', '9182946945', '39215538400', '1917500000', '1904883411', '600000000', '6562500000', '5500000000', '15049787710', '4462963276', '12135235641', '1994370480', '7747281949', '8001111504', '23453177240', '1635333332', '7700000148', '1900073314', '1387500000', '21482028246', '715000000', '488000000', '1599999996', '896709596', '13755600000', '797813496', '750000000', '2495753334', '701043478', '10351231636', '220808000', '3021875000', '6194200000', '3128140475', '7096000000', '641717510', '4752982378', '73970569505', '2500000000', '1119326168', '2463335405', '5758675440', '450000000', '1653574499', '662400000', '1000003979', '20452176844', '1170909181', '7310929389', '4823076400', '1058333250', '2050015767', '1435000712', '26007494645', '3141443831', '3478036250', '2287500000', '75422200', '6666666700', '16464270400', '43750000000', '6437500000', '1912774405', '8496000000', '870171478'], 'Properties & Real Estate': ['22222222200', '3873500000', '22699326779', '9006250000', '681823317', '19649411888', '1250000000', '661784520', '5591980103', '4800016020', '1429915525', '9647311150', '592280000', '5028669376', '7513992252', '167708902705', '25091882375', '21171365812', '1356250000', '5405188966', '4871214021', '2433379958', '1307000000', '18535695255', '7431530800', '3141390962', '10365854185', '48198111100', '1850000000', '43521913019', '3350000000', '6400000000', '1984009887', '10011027656', '1015380000', '4276655336', '7375720674', '1040740800', '1575000000', '4382841253', '11181971732', '949868500', '13750000000', '7150002603', '20824888369', '4415590000', '2792620000', '5630000914', '2679600000', '70898018369', '1170432803', '12533067322', '948194000', '6889134608', '9942500000', '1460002367', '7655126330', '232848000', '86703220792', '11004929322', '22198871804', '2197540705', '2945211000', '3125000000', '3550000000', '2010526400', '8318823600', '8388870206', '61675671883', '329560000', '1000000000', '48159602400', '2656212826', '268800000', '6633610151', '5727802639', '45080600000', '10945000000', '1435185100', '13592128209', '8033263239', '1375000000', '4772138237', '16508568358', '5385019201', '10069645750', '4551457323', '7571035172', '1210000000', '3232122640', '3055709212', '5235283980'], 'Infrastructures': ['12675160000', '8407608979', '2928495000', '6250000000', '3934592500', '4725101522', '133786220000', '36822665755', '2640452000', '2086950000', '31183464900', '5436872008', '5541165000', '13128430665', '400000975', '335388383259', '550000000', '28233511500', '1277276000', '2120000000', '1350904927', '2003000000', '7500034794', '1818384820', '5284811100', '8062702740', '1082575681', '16308519860', '7257871200', '587152700', '1742167907', '3666312500', '2841262838', '2861333000', '1663943474', '3966350139', '1000000000', '2863195484', '3812500000', '17710708194', '23646668691', '816997053', '83552719544', '2084850829', '770000000', '2496258344', '6347220000', '3000000000', '41488978343', '2813941985', '16087156000', '10224271000', '1500000000', '6199897354', '878187500', '1250000000', '1253000000', '4705249440', '1137579698', '1200000696', '22656999445', '2750000000', '99062216600', '33330000000', '3410000000', '51014625000', '9572000000', '8969951372', '28806807016']}

label_fontsize = 8

def set_tick_params(axis):
    axis.tick_params(axis='both', which='major', labelsize=label_fontsize)

def has_consecutive_repeats(column, num_of_repeat):
    prev_value = None
    consecutive_count = 1
    for value in column:
        if value == prev_value:
            consecutive_count += 1
            if consecutive_count > num_of_repeat:
                return True
        else:
            consecutive_count = 1
        prev_value = value
    return False

filtered_data = pd.read_pickle('../Data_Collection/clean_data_1day.pkl')
filtered_data = filtered_data[-100:]

list_of_flat_stocks = []
for column in filtered_data['Close'].columns:
    current_series = filtered_data['Close'][column]
    if has_consecutive_repeats(current_series, 30):
        list_of_flat_stocks.append(column)

stock_codes = [column for column in filtered_data['Close'].columns if column not in list_of_flat_stocks]
industries_cleaned = {}
for key in industries:
    industry_stocks = industries[key]
    new_list = [stock for stock in industry_stocks if stock not in list_of_flat_stocks]
    industries_cleaned[key] = new_list


close_table = filtered_data['Close'][stock_codes]
high_table = filtered_data['High'][stock_codes]
low_table = filtered_data['Low'][stock_codes]
open_table = filtered_data['Open'][stock_codes]
diff_between_high_and_low = (high_table - low_table)/low_table*100
diff_between_open_and_low = (open_table - low_table)/open_table * 100
# open_close_gap = (open_table-close_table.shift(-1))/open_table * 100
close_change = (close_table-close_table.shift(-1))/close_table * 100

for stock in stock_codes:
    for key in industries:
        industry = industries[key]
        shares_industry = shares[key]
        if stock in industry:
            industry_stocks = industries_cleaned[key]
            industry_shares = [int(shares_industry[industry.index(stock)]) for stock in industry_stocks]
            industry_name = key
            break
    fig = plt.figure(figsize=(15,7))
    grid = plt.GridSpec(nrows=3, ncols=4)
    close_prices = close_table[stock]
    high_prices = high_table[stock]
    low_prices = low_table[stock]
    open_prices = open_table[stock]
    close_cap = close_table[industry_stocks].multiply(industry_shares,axis=1)
    open_cap = open_table[industry_stocks].multiply(industry_shares,axis=1)
    low_cap = low_table[industry_stocks].multiply(industry_shares,axis=1)
    high_cap = high_table[industry_stocks].multiply(industry_shares,axis=1)
    close_prices_industry = (close_table[industry_stocks]*(close_cap.div(close_cap.sum(axis=1), axis=0))).mean(axis=1)
    open_prices_industry = (open_table[industry_stocks]*(open_cap.div(open_cap.sum(axis=1), axis=0))).mean(axis=1)
    low_prices_industry = (low_table[industry_stocks]*(low_cap.div(low_cap.sum(axis=1), axis=0))).mean(axis=1)
    high_prices_industry = (high_table[industry_stocks]*(high_cap.div(high_cap.sum(axis=1), axis=0))).mean(axis=1)
    main = fig.add_subplot(grid[0,0])
    main.plot(close_prices.index, close_prices.values, color='b')
    main.plot(close_prices.index, open_prices.values, color='y')
    main.plot(close_prices.index, high_prices.values, color='g')
    main.plot(close_prices.index, low_prices.values, color='r')
    main.set_title(f'Price against time: {stock}', fontsize=label_fontsize)
    set_tick_params(main)
    industry_index = fig.add_subplot(grid[0,2])
    industry_index.plot(close_prices_industry.index, close_prices_industry.values,color='b')
    industry_index.plot(close_prices_industry.index, open_prices_industry.values, color='y')
    industry_index.plot(close_prices_industry.index, high_prices_industry.values, color='g')
    industry_index.plot(close_prices_industry.index, low_prices_industry.values, color='r')
    industry_index.set_title(f'Price against time: {industry_name}', fontsize=label_fontsize)
    set_tick_params(industry_index)
    high_low = fig.add_subplot(grid[1,0], sharex=main)
    high_low.plot(close_prices.index, diff_between_high_and_low[stock].values, color='b')
    high_low.set_title(f'High Low diff against time: {stock}', fontsize=label_fontsize)
    set_tick_params(high_low)
    open_low = fig.add_subplot(grid[2,0], sharex=main)
    open_low.plot(close_prices.index, diff_between_open_and_low[stock].values, color='b')
    open_low.set_title(f'Open Low diff against time: {stock}', fontsize=label_fontsize)
    set_tick_params(open_low)
    diff_between_high_and_low_industry = (high_prices_industry - low_prices_industry) / low_prices_industry * 100
    diff_between_open_and_low_industry = (open_prices_industry - low_prices_industry) / open_prices_industry * 100
    # open_close_gap_industry = (open_prices_industry - close_prices_industry.shift(-1)) / open_prices_industry * 100
    close_change_industry = (close_prices_industry - close_prices_industry.shift(-1)) / close_prices_industry * 100

    high_low_industry = fig.add_subplot(grid[1,2], sharex=industry_index)
    high_low_industry.plot(close_prices_industry.index, diff_between_high_and_low_industry.values, color='b')
    high_low_industry.set_title(f'High Low diff against time: {industry_name}', fontsize=label_fontsize)
    set_tick_params(high_low_industry)
    open_low_industry = fig.add_subplot(grid[2,2], sharex=industry_index)
    open_low_industry.plot(close_prices_industry.index, diff_between_open_and_low_industry.values, color='b')
    open_low_industry.set_title(f'Open Low diff against time: {industry_name}', fontsize=label_fontsize)
    set_tick_params(open_low_industry)

    # scatter = fig.add_subplot(grid[0:1, 1])
    # scatter.scatter(diff_between_high_and_low[stock].values,diff_between_open_and_low[stock].values, color='m')
    # scatter.set_title(f'Open Low diff against High Low diff: {stock}')
    # auto_corr = fig.add_subplot(grid[0,1])
    # auto_corr.acorr(close_change[stock], color='k', maxlags=1000)
    # kernel0 = fig.add_subplot(grid[0,1])
    # sns.kdeplot(open_close_gap[stock].values,ax=kernel0)
    # kernel0.set_title(f'KDE of Open Close Gap', fontsize=label_fontsize)
    # set_tick_params(kernel0)
    # kernel0.axvline(np.mean(open_close_gap[stock].values) + np.std(open_close_gap[stock].values), color='b',linestyle='--')
    # kernel0.axvline(np.mean(open_close_gap[stock].values) - np.std(open_close_gap[stock].values), color='b',
    #                 linestyle='--')
    kernel1 = fig.add_subplot(grid[1,1])
    sns.kdeplot(diff_between_high_and_low[stock].values, ax=kernel1)
    kernel1.set_title(f'KDE of High Low diff', fontsize=label_fontsize)
    set_tick_params(kernel1)
    kernel1.axvline(np.mean(diff_between_high_and_low[stock].values) + np.std(diff_between_high_and_low[stock].values), color='b',linestyle='--')
    kernel1.axvline(np.mean(diff_between_high_and_low[stock].values) - np.std(diff_between_high_and_low[stock].values), color='b',
                    linestyle='--')
    kernel2 = fig.add_subplot(grid[2,1])
    sns.kdeplot(diff_between_open_and_low[stock].values,ax=kernel2)
    kernel2.set_title(f'KDE of Open Low diff', fontsize=label_fontsize)
    set_tick_params(kernel2)
    kernel2.axvline(np.mean(diff_between_open_and_low[stock].values) + np.std(diff_between_open_and_low[stock].values), color='b',
                    linestyle='--')
    kernel2.axvline(np.mean(diff_between_open_and_low[stock].values) - np.std(diff_between_open_and_low[stock].values), color='b',
                    linestyle='--')

    # kernel0_industry = fig.add_subplot(grid[0,3])
    # sns.kdeplot(open_close_gap_industry.values, ax=kernel0_industry)
    # kernel0_industry.set_title(f'KDE of Open Close Gap of {industry_name}', fontsize=label_fontsize)
    # set_tick_params(kernel0_industry)
    # kernel0_industry.axvline(np.mean(open_close_gap_industry.values) + np.std(open_close_gap_industry.values), color='b',linestyle='--')
    # kernel0_industry.axvline(np.mean(open_close_gap_industry.values) - np.std(open_close_gap_industry.values), color='b',
    #                 linestyle='--')
    kernel1_industry = fig.add_subplot(grid[1, 3])
    sns.kdeplot(diff_between_high_and_low_industry.values, ax=kernel1_industry)
    kernel1_industry.set_title(f'KDE of High Low diff of {industry_name}', fontsize=label_fontsize)
    set_tick_params(kernel1_industry)
    kernel1_industry.axvline(np.mean(diff_between_high_and_low_industry.values) + np.std(diff_between_high_and_low_industry.values), color='b',linestyle='--')
    kernel1_industry.axvline(np.mean(diff_between_high_and_low_industry.values) - np.std(diff_between_high_and_low_industry.values), color='b',
                    linestyle='--')
    kernel2_industry = fig.add_subplot(grid[2, 3])
    sns.kdeplot(diff_between_open_and_low_industry.values, ax=kernel2_industry)
    kernel2_industry.set_title(f'KDE of Open Low diff of {industry_name}', fontsize=label_fontsize)
    set_tick_params(kernel2_industry)
    kernel2_industry.axvline(np.mean(diff_between_open_and_low_industry.values) + np.std(diff_between_open_and_low_industry.values), color='b',
                    linestyle='--')
    kernel2_industry.axvline(np.mean(diff_between_open_and_low_industry.values) - np.std(diff_between_open_and_low_industry.values), color='b',
                    linestyle='--')

    fig_mgr = plt.get_current_fig_manager()
    fig_mgr.window.wm_geometry("+0+0")
    plt.tight_layout()
    plt.show()